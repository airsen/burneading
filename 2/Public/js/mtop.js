!function(a,b){if(!b.config||!b.config.sysType){var c=a.location.hostname,d=/.*?([^.]+)(?:\.x)?\.(taobao|tmall|etao|alibaba|alipay|aliyun)\.(com|net).*/i,e=a.location.hostname.match(d),f=c.match(/taobao\.net$/i)?"waptest":"m";!e||"waptest"!==e[1]&&"wapa"!==e[1]&&"m"!==e[1]||(f=e[1]),b.config={hostReg:d,sysType:f,defaultAppKey:"waptest"===f?"4272":"12574478"}}}(window,window.lib||(window.lib={})),function(a,b){b.encode||(b.encode={}),b.encode.md5=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}function n(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}var o,p,q,r,s,t,u,v,w,x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(a=n(a),x=l(a),t=1732584193,u=4023233417,v=2562383102,w=271733878,o=0;o<x.length;o+=16)p=t,q=u,r=v,s=w,t=h(t,u,v,w,x[o+0],y,3614090360),w=h(w,t,u,v,x[o+1],z,3905402710),v=h(v,w,t,u,x[o+2],A,606105819),u=h(u,v,w,t,x[o+3],B,3250441966),t=h(t,u,v,w,x[o+4],y,4118548399),w=h(w,t,u,v,x[o+5],z,1200080426),v=h(v,w,t,u,x[o+6],A,2821735955),u=h(u,v,w,t,x[o+7],B,4249261313),t=h(t,u,v,w,x[o+8],y,1770035416),w=h(w,t,u,v,x[o+9],z,2336552879),v=h(v,w,t,u,x[o+10],A,4294925233),u=h(u,v,w,t,x[o+11],B,2304563134),t=h(t,u,v,w,x[o+12],y,1804603682),w=h(w,t,u,v,x[o+13],z,4254626195),v=h(v,w,t,u,x[o+14],A,2792965006),u=h(u,v,w,t,x[o+15],B,1236535329),t=i(t,u,v,w,x[o+1],C,4129170786),w=i(w,t,u,v,x[o+6],D,3225465664),v=i(v,w,t,u,x[o+11],E,643717713),u=i(u,v,w,t,x[o+0],F,3921069994),t=i(t,u,v,w,x[o+5],C,3593408605),w=i(w,t,u,v,x[o+10],D,38016083),v=i(v,w,t,u,x[o+15],E,3634488961),u=i(u,v,w,t,x[o+4],F,3889429448),t=i(t,u,v,w,x[o+9],C,568446438),w=i(w,t,u,v,x[o+14],D,3275163606),v=i(v,w,t,u,x[o+3],E,4107603335),u=i(u,v,w,t,x[o+8],F,1163531501),t=i(t,u,v,w,x[o+13],C,2850285829),w=i(w,t,u,v,x[o+2],D,4243563512),v=i(v,w,t,u,x[o+7],E,1735328473),u=i(u,v,w,t,x[o+12],F,2368359562),t=j(t,u,v,w,x[o+5],G,4294588738),w=j(w,t,u,v,x[o+8],H,2272392833),v=j(v,w,t,u,x[o+11],I,1839030562),u=j(u,v,w,t,x[o+14],J,4259657740),t=j(t,u,v,w,x[o+1],G,2763975236),w=j(w,t,u,v,x[o+4],H,1272893353),v=j(v,w,t,u,x[o+7],I,4139469664),u=j(u,v,w,t,x[o+10],J,3200236656),t=j(t,u,v,w,x[o+13],G,681279174),w=j(w,t,u,v,x[o+0],H,3936430074),v=j(v,w,t,u,x[o+3],I,3572445317),u=j(u,v,w,t,x[o+6],J,76029189),t=j(t,u,v,w,x[o+9],G,3654602809),w=j(w,t,u,v,x[o+12],H,3873151461),v=j(v,w,t,u,x[o+15],I,530742520),u=j(u,v,w,t,x[o+2],J,3299628645),t=k(t,u,v,w,x[o+0],K,4096336452),w=k(w,t,u,v,x[o+7],L,1126891415),v=k(v,w,t,u,x[o+14],M,2878612391),u=k(u,v,w,t,x[o+5],N,4237533241),t=k(t,u,v,w,x[o+12],K,1700485571),w=k(w,t,u,v,x[o+3],L,2399980690),v=k(v,w,t,u,x[o+10],M,4293915773),u=k(u,v,w,t,x[o+1],N,2240044497),t=k(t,u,v,w,x[o+8],K,1873313359),w=k(w,t,u,v,x[o+15],L,4264355552),v=k(v,w,t,u,x[o+6],M,2734768916),u=k(u,v,w,t,x[o+13],N,1309151649),t=k(t,u,v,w,x[o+4],K,4149444226),w=k(w,t,u,v,x[o+11],L,3174756917),v=k(v,w,t,u,x[o+2],M,718787259),u=k(u,v,w,t,x[o+9],N,3951481745),t=c(t,p),u=c(u,q),v=c(v,r),w=c(w,s);var O=m(t)+m(u)+m(v)+m(w);return O.toLowerCase()}}(window,window.lib||(window.lib={})),function(a,b){function c(a){var b=document.cookie.indexOf(";",a);return-1===b&&(b=document.cookie.length),window.unescape(decodeURIComponent(document.cookie.substring(a,b)))}b.storage||(b.storage={}),b.storage.cookie={isCookieEnable:function(){if(!window.navigator.cookieEnabled)return!1;var a="_s_cookie_",b=this.getCookie(a);return this.setCookie(a,"1"),"1"===b?(this.delCookie(a),!0):!1},getCookie:function(a){for(var b,d=a+"=",e=d.length,f=document.cookie.length,g=0;f>g;){if(b=g+e,document.cookie.substring(g,b)===d)return c(b);if(g=document.cookie.indexOf(" ",g)+1,0===g)break}return null},setCookie:function(a,b){var c=window.location.host,d=c.indexOf("."),e=c.substring(0,d),f=arguments.length>2?arguments[2]:null,g=new Date;"waptest"!==e&&"wapa"!==e&&"m"!==e&&(c.indexOf("taobao")>-1||c.indexOf("tmall")>-1)&&(c=c.substr(d+1)),null==f?document.cookie=a+"="+window.escape(b)+";path=/;domain="+c:(g.setTime(g.getTime()+1e3*f),document.cookie=a+"="+window.escape(b)+";path=/;domain="+c+";expires="+g.toGMTString())},delCookie:function(a){var b=new Date,c=this.getCookie(a);b.setTime(b.getTime()-1),document.cookie=a+"="+c+"; expires="+b.toGMTString()}}}(window,window.lib||(window.lib={})),function(a,b){var c=b.mtop||(b.mtop={});c.EXECUTOR={isRunning:!1,executorQue:[],resume:function(){var a=this.executorQue[0];this.executorQue=this.executorQue.slice(1),a?a.run():this.isRunning=!1},_executors:[],_getExecutor:function(a){for(var b,c=this._executors.length,d=c;d>0&&(b=this._executors[d-1],!b.canRun(a));d--);var e=new b(a);return e},register:function(a,b){var d=function(a){this.init(a)};d.canRun=a,b.handleResponse=function(a){c.wrapHandler.call(this,a),c.EXECUTOR.resume()},d.prototype=b,this._executors.push(d)},execute:function(a){var b=this._getExecutor(a);this.executorQue.push(b),this.isRunning||(this.isRunning=!0,this.resume())}}}(window,window.lib||(window.lib={})),function(a,b){var c=b.mtop||(b.mtop={});c.ajax=function(){this.EXECUTOR.execute(arguments)}}(window,window.lib||(window.lib={})),function(a,b){var c={},d=function(a){try{return decodeURIComponent(a)}catch(b){return a}},e=c.getParam=function(a){var b,c=this.queryMap||function(a){if(a.length<1)return"";a=a.substr(1);var b,c,e=a.split("&"),f={};for(c in e)b=e[c].split("="),f[d(b[0])]=d(b[1]);return f}(location.search);return this.queryMap=c,a?(b=c[a],b&&b.indexOf("#")>-1&&(b=encodeURIComponent(b)),b):c},f=function(a){var b,c,d,f="";for(b in a)c=a[b],d=e(c),d&&""!==d&&(f+="&"+c+"="+d);return f}(["ttid","sprefer"]);c.getUrl=function(a){function c(a,b){if(!b)return a;a.indexOf("?")<0&&(a+="?");var c=a.charAt(a.length-1),d=b.charAt(0);return"?"===c||"&"===c?"?"===d||"&"===d?a+b.substr(1):a+b:"?"===d||"&"===d?a+b:a+"&"+b}var d=a.host||a.subdomain+"."+b.config.sysType+".taobao.com",e=a.url||"http://"+d+"/"+a.path;return e.indexOf("?")>0||(e+="?"),e=c(e,f),a.data&&(e=c(e,function(a){var b,c,d="";if(null==a)return d;for(b in a)c=a[b],null!=c&&""!==c&&(d+=b+"="+encodeURIComponent("object"==typeof c?JSON.stringify(c):c)+"&");return""!==d&&d.length-1===d.lastIndexOf("&")&&(d=d.substr(0,d.length-1)),d}(a.data))),e},b.uri=c}(window,window.lib||(window.lib={})),function(a,b){var c=b.storage.cookie,d=b.mtop||(b.mtop={}),e=0,f=5;d.wrapHandler=function(a){var d=(a&&a.ret?a.ret:"").toString();d.indexOf("SUCCESS::")>=0?(e=0,this.callback&&this.callback(a)):-1!==d.indexOf("TOKEN_EMPTY::")||-1!==d.indexOf("TOKEN_EXOIRED::")?++e<f?(console.log("TODO RETRY"),this.retryed=!0,b.mtop.ajax(this.options,this.callback,this.errorback)):(c.delCookie(b.mtop.base.tokenKey),console.log("try exceed times")):this.errorback&&this.errorback(a)}}(window,window.lib||(window.lib={})),function(a,b){var c=b.storage.cookie,d=b.encode.md5,e=b.uri.getUrl,f="J_app_key",g=b.mtop||(b.mtop={});g.base={tokenKey:"_m_h5_tk",that:this,appKey:function(){var a=b.config,c=document.getElementById(f);return c?c.value:a.defaultAppKey}(),_getToken:function(){return(c.getCookie(this.tokenKey)||"").split("_")[0]},genApiUrl:function(a,c,d){var f=b.config,g="rest/"+c,h={path:g,data:a};if(f.mtopHost)h.host=f.mtopHost;else if(a.subdomain)h.subdomain=a.subdomain,delete a.subdomain;else{var i=f.hostReg.exec(location.hostname);i?(i[0]="etao"===i[2]?"apie":"api",h.host=i.join(".")):h.subdomain="api"}var j=e(h);return j+"&appKey="+this.appKey+"&t="+d},sign:function(a,b){var c=this._getToken()+"&"+b+"&"+this.appKey+"&"+a;return d(c)}}}(window,window.lib||(window.lib={})),function(a,b){var c=b.mtop||(b.mtop={}),d=c.base,e="h5ApiUpdate.do";c.EXECUTOR.register(function(a){return!a[0].length&&a[0].api&&!a[0].cros},{init:function(a){this.options=a[0],this.t=(new Date).getTime(),this.callback=a[1],this.errorback=a[2]},run:function(){var b=this,c=this._genSignUrl(),d={type:"GET",url:c,timeout:2e4,dataType:"jsonp",success:function(a){b.handleResponse&&b.handleResponse(a)},error:function(a){b.handleResponse&&b.handleResponse(a)}};a.$.ajax(d)},_genSignUrl:function(){var a=d.genApiUrl(this.options,e,this.t);return this._addJsonParam(a)+"&sign="+d.sign(JSON.stringify(this.options.data),this.t)},_addJsonParam:function(a){if(-1===a.indexOf("callback=")){var b=a.indexOf("?");return a.substr(0,b)+"?callback=?&type=jsonp&"+a.substr(b+1,a.length)}return a}}),c.request=function(a,b,c){var d=a.data||{};a.v=a.v||"*",a.data="string"==typeof d?JSON.parse(d):d,this.ajax(a,b,c)},c.getApi=function(a,b,c,d,e,f){d||(d={}),d.api=a,d.v=b,d.data=c,this.request(d,e,f)}}(window,window.lib||(window.lib={}));